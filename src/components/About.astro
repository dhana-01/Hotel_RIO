---
import { Image } from 'astro:assets';
// Placeholder images or use the hero image again if needed, or colored blocks for now.
---

<section id="about" class="py-20 md:py-32 bg-rio-white overflow-hidden">
  <div class="container mx-auto px-6">
    <div class="flex flex-col md:flex-row items-center gap-16">
      <!-- Text Content -->
      <div class="w-full md:w-1/2">
        <p class="about-reveal text-rio-red font-sans uppercase tracking-[0.2em] text-sm mb-6">Discovery</p>
        <h2 class="about-reveal text-4xl md:text-5xl font-serif text-rio-black mb-8 leading-tight">
          Beyond the hotel,<br/>
          <span class="italic text-gray-500">Nature awaits</span>
        </h2>
        <p class="about-reveal text-gray-600 font-sans leading-relaxed mb-6 font-light">
          Nestled in the heart of the Cultural Triangle, Hotel Rio offers unobstructed views of Sigiriya and Pidurangala. 
          Step into a world where modern luxury meets the authentic hospitality of Sri Lanka.
        </p>
        <p class="about-reveal text-gray-600 font-sans leading-relaxed mb-10 font-light">
           We bring you the essence of Sri Lanka through unique experiences, delicious food, and a deep connection to the wildlife that surrounds us.
        </p>
        
        <a href="#location" class="about-reveal group inline-flex items-center text-rio-black uppercase tracking-widest text-sm hover:text-rio-red transition-colors">
          Explore the location
          <span class="ml-2 transform group-hover:translate-x-2 transition-transform duration-300">â†’</span>
        </a>
      </div>

      <!-- Visual Content -->
      <div class="w-[600px] h-[600px] flex-none relative bg-gray-200 overflow-hidden shadow-xl rounded-lg group" id="about-image-container">
          <!-- Text Overlay (Persist underneath or on top? Keeping underneath as per original design, but images need to sit on top of bg) -->
          <div class="absolute inset-0 bg-rio-gray flex items-center justify-center -z-10">
             <span class="text-rio-black/20 font-serif text-4xl italic">Sigiriya View</span>
          </div>

          <!-- Slideshow Images -->
          <div class="absolute inset-0 w-full h-full" id="slideshow-wrapper">
              <img src="/images/sigiriya.jpg" alt="Sigiriya" class="slide-img absolute inset-0 w-full h-full object-cover z-10" />
              <img src="/images/about1.jpg" alt="Hotel Interior" class="slide-img absolute inset-0 w-full h-full object-cover z-0" />
              <img src="/images/about2.jpg" alt="Scenic View" class="slide-img absolute inset-0 w-full h-full object-cover z-0" />
              <img src="/images/about3.jpg" alt="Dining" class="slide-img absolute inset-0 w-full h-full object-cover z-0" />
              <img src="/images/about4.jpg" alt="Dining" class="slide-img absolute inset-0 w-full h-full object-cover z-0" />
              <img src="/images/about5.jpg" alt="Dining" class="slide-img absolute inset-0 w-full h-full object-cover z-0" />
          </div>

          <!-- Wipe Line -->
          <div id="wipe-line" class="absolute top-0 bottom-0 left-0 w-1 bg-white z-50 opacity-0 pointer-events-none"></div>
      </div>

<script>
  import { gsap } from "gsap";
  import { ScrollTrigger } from "gsap/ScrollTrigger";
  
  gsap.registerPlugin(ScrollTrigger);

  // Scroll Reveal Animations for Text
  const aboutRevealElements = document.querySelectorAll('.about-reveal');
  
  aboutRevealElements.forEach((element, index) => {
    gsap.from(element, {
      scrollTrigger: {
        trigger: element,
        start: "top 85%",
        toggleActions: "play none none none"
      },
      opacity: 0,
      y: 30,
      duration: 0.8,
      delay: index * 0.15,
      ease: "power2.out"
    });
  });

  // Image Slideshow Animation
  const images = document.querySelectorAll('.slide-img');
  const wipeLine = document.getElementById('wipe-line');
  let currentIndex = 0;
  const slideInterval = 2000; // 2 seconds
  
  if (images.length > 0 && wipeLine) {
      gsap.set(images, { zIndex: 0, opacity: 1 });
      gsap.set(images[0], { zIndex: 10 });

      const cycleImages = () => {
          const nextIndex = (currentIndex + 1) % images.length;
          const currentImg = images[currentIndex];
          const nextImg = images[nextIndex];

          gsap.set(nextImg, { zIndex: 20, clipPath: "inset(0 0 0 100%)" });
          
          const tl = gsap.timeline({
            onComplete: () => {
                gsap.set(currentImg, { zIndex: 0 });
                gsap.set(nextImg, { zIndex: 10 });
                currentIndex = nextIndex;
            }
          });

          tl.set(wipeLine, { opacity: 1, left: "100%" })
            .to(wipeLine, { 
                left: "0%", 
                duration: 1, 
                ease: "power2.inOut" 
            }, 0)
            .to(nextImg, { 
                clipPath: "inset(0 0 0 0%)", 
                duration: 1, 
                ease: "power2.inOut" 
            }, 0)
            .set(wipeLine, { opacity: 0 });
      };

      setInterval(() => {
          cycleImages();
      }, slideInterval + 1000);
  }
</script>
    </div>
  </div>
</section>
